
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/html" xmlns="http://www.w3.org/1999/html">
<head>
    <title>Register</title>
    <link
            rel="shortcut icon"
            href="https://cdn.glitch.com/bde716c8-a7be-413a-8d34-d62a703710c6%2Ficon.png?v=1603746656779"
            type="image/x-icon"
    />
    <meta name="google-signin-client_id" content="438333229045-1lqhpbe3iacjq42bfn12895mbp8cv4bp.apps.googleusercontent.com"/>

    <meta charset="utf-8"/>
    <meta
            name="viewport"
            content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <link rel="stylesheet" type="text/css" href="/loginPage/Style/logInStyle.css"/>
    <link
            rel="stylesheet"
            href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    />

    <link
            href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
            rel="stylesheet"
    />


    <link
            rel="stylesheet"
            href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
            integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z"
            crossorigin="anonymous"
    />
    <script src="https://code.jquery.com/jquery-3.5.0.js"></script>

</head>

<body>
<div class="container-fluid">
    <div class="row">
        <div class="col-lg-6 col-md-6 form-container">
            <div class="col-lg-8 col-md-12 col-sm-9 col-xs-12 form-box text-center">
                <div class="logo mt-5 mb-3">
                    <img src="https://cdn.glitch.com/f0328534-9c08-4f7a-867f-48d6314fffae%2FComputerlock.png?v=1606285757209" width="150px"/>
                </div>
                <div class="heading mb-3">
                    <h4>Create an account</h4>
                </div>
                <form action="register_user.php" method="post">
                    <div class="form-input">
                        <span><i class="fa fa-user"></i></span>
                        <input type="text" id="fullName" name="name" placeholder="Full Name" required/>
                    </div>
                    <div class="form-input">
                        <span><i class="fa fa-envelope"></i></span>
                        <input
                                type="email"
                                id="inputEmail"
                                name="email"
                                onkeyup="send()"
                                placeholder="Email Address"
                                required
                        />
                    </div>
                    <div class="form-input">
                        <span><i class="fa fa-lock"></i></span>
                        <input
                                type="password"
                                id="inputPassword"
                                placeholder="Password"
                                required
                                name="pass"
                        />
                    </div>
                    <div class="row mb-3">
                        <div class="col-12 d-flex">
                            <div class="custom-control custom-checkbox">
                                <input
                                        type="checkbox"
                                        class="custom-control-input"
                                        id="cb1"
                                        required
                                        name="s"
                                />
                                <label class="custom-control-label text-white" for="cb1"
                                >I agree all terms & conditions</label
                                >
                            </div>
                        </div>
                    </div>
                    <div class="text-left mb-3">
                        <button
                                type="submit"
                                id="SignUp"
                                class="btn btn-info "
                                name="push" >
                            Sign Up
                        </button>
                    </div>
                    <div class="text-white mb-3">or register with</div>
                    <div class="row mb-3">
                        <div class="col-4">
                            <a href="" class="btn btn-block btn-social btn-facebook">
                                <i class="fa fa-facebook"></i>
                            </a>
                        </div>
                        <div class="col-4" id="google_button">
                            <a href="" class="btn btn-block btn-social btn-google">
                                <i class="fa fa-google"></i>
                            </a>
                        </div>
                        <div class="col-4">
                            <a href="" class="btn btn-block btn-social btn-twitter">
                                <i class="fa fa-twitter"></i>
                            </a>
                        </div>
                    </div>
                    <div class="text-white">
                        Already have an account?
                        <a href="/loginPage/login_glitch.html" class="login-link">Login here</a>
                    </div>

                </form>
            </div>
        </div>

        <div class="col-lg-6 col-md-6 d-none d-md-block ">
            <img
                    src="https://cdn.glitch.com/f0328534-9c08-4f7a-867f-48d6314fffae%2Fimg15.jpg?v=1606286283014"
                    width="790px"
                    height="890px"
            />
        </div>
    </div>
</div>

<script>
    function send() {
        var email = document.getElementById("inputEmail").value;
        sessionStorage.setItem("email", email);
    }



</script>
<script>
    function onSuccess(googleUser) {
        var id_token = googleUser.getAuthResponse().id_token;
        console.log('Logged in as: ' + googleUser.getBasicProfile().getName());
        console.log(googleUser.getAuthResponse().id_token);
        var xhr = new XMLHttpRequest();
        xhr.onreadystatechange = function() {
            if (this.readyState === 4 && this.status === 200) {
                console.log('Signed in as: ' + JSON.parse(xhr.responseText));
                sessionStorage.setItem("email",googleUser.getBasicProfile().getEmail())
                window.location.assign(String(JSON.parse(xhr.responseText)));
            }
        };
        xhr.open('POST', 'register_user.php', true);
        xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
        var d = {'google' : 1, 'id_token': id_token, 'email': String(googleUser.getBasicProfile().getEmail()) };
        console.log(d);
        xhr.send(JSON.stringify(d));



    }
    function onFailure(error) {
        console.log(error);
    }
    function renderButton() {

        gapi.signin2.render('google_button', {
            'scope': 'profile email',
            'width': 240,
            'height': 50,
            'longtitle': true,
            'theme': 'dark',
            'onsuccess': onSuccess,
            'onfailure': onFailure

        });
    }
</script>

<script src="https://apis.google.com/js/platform.js?onload=renderButton" async defer></script>

</body>
</html>

