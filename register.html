
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/html" xmlns="http://www.w3.org/1999/html">
<head>
    <title>Register</title>
    <link
            rel="shortcut icon"
            href="https://cdn.glitch.com/bde716c8-a7be-413a-8d34-d62a703710c6%2Ficon.png?v=1603746656779"
            type="image/x-icon"
    />
    <meta charset="utf-8"/>
    <meta
            name="viewport"
            content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <link rel="stylesheet" type="text/css" href="/loginPage/Style/logInStyle.css"/>
    <link
            rel="stylesheet"
            href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    />
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <link
            href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
            rel="stylesheet"
    />

    <script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.1.1/firebase.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-analytics.js"></script>
    <link
            rel="stylesheet"
            href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
            integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z"
            crossorigin="anonymous"
    />
    <script>
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        var firebaseConfig = {
            apiKey: "AIzaSyA6DQQ3s8lW3F6tAtQvBoFe7SpegjBJ_ek",
            authDomain: "plantopart-4c826.firebaseapp.com",
            databaseURL: "https://plantopart-4c826.firebaseio.com",
            projectId: "plantopart-4c826",
            storageBucket: "plantopart-4c826.appspot.com",
            messagingSenderId: "438333229045",
            appId: "1:438333229045:web:e5d2b75e1c688da2edc2bc",
            measurementId: "G-Q0R9D2MWFW"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        firebase.analytics();
    </script>
    <script
            src="https://code.jquery.com/jquery-3.5.1.min.js"
            integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
            crossorigin="anonymous"
    ></script>
</head>

<body>
<div class="container-fluid">
    <div class="row">
        <div class="col-lg-6 col-md-6 form-container">
            <div class="col-lg-8 col-md-12 col-sm-9 col-xs-12 form-box text-center">
                <div class="logo mt-5 mb-3">
                    <img src="https://cdn.glitch.com/f0328534-9c08-4f7a-867f-48d6314fffae%2FComputerlock.png?v=1606285757209" width="150px"/>
                </div>
                <div class="heading mb-3">
                    <h4>Create an account</h4>
                </div>
                <form action="register_user.php" method="post" >
                    <div class="form-input">
                        <span><i class="fa fa-user"></i></span>
                        <input type="text" id="fullName" name="name" placeholder="Full Name" required/>
                    </div>
                    <div class="form-input">
                        <span><i class="fa fa-envelope"></i></span>
                        <input
                                type="email"
                                id="inputEmail"
                                name="email"
                                placeholder="Email Address"
                                required
                        />
                    </div>
                    <div class="form-input">
                        <span><i class="fa fa-lock"></i></span>
                        <input
                                type="password"
                                id="inputPassword"
                                placeholder="Password"
                                required
                                name="pass"
                        />
                    </div>
                    <div class="row mb-3">
                        <div class="col-12 d-flex">
                            <div class="custom-control custom-checkbox">
                                <input
                                        type="checkbox"
                                        class="custom-control-input"
                                        id="cb1"
                                        required
                                        name="s"
                                />
                                <label class="custom-control-label text-white" for="cb1"
                                >I agree all terms & conditions</label
                                >
                            </div>
                        </div>
                    </div>
                    <div class="text-left mb-3">
                        <button
                                type="submit"
                                id="ignUp"
                                class="btn btn-info "
                                name="push"
                        >
                            Sign Up
                        </button>
                    </div>
                    <div class="text-white mb-3">or register with</div>
                    <div class="row mb-3">
                        <div class="col-4">
                            <a href="" class="btn btn-block btn-social btn-facebook">
                                <i class="fa fa-facebook"></i>
                            </a>
                        </div>
                        <div class="col-4">
                            <a href="" class="btn btn-block btn-social btn-google">
                                <i class="fa fa-google"></i>
                            </a>
                        </div>
                        <div class="col-4">
                            <a href="" class="btn btn-block btn-social btn-twitter">
                                <i class="fa fa-twitter"></i>
                            </a>
                        </div>
                    </div>
                    <div class="text-white">
                        Already have an account?
                        <a href="/loginPage/login_glitch.html" class="login-link">Login here</a>
                    </div>
                </form>
            </div>
        </div>

        <div class="col-lg-6 col-md-6 d-none d-md-block ">
            <img
                    src="https://cdn.glitch.com/f0328534-9c08-4f7a-867f-48d6314fffae%2Fimg15.jpg?v=1606286283014"
                    width="790px"
                    height="890px"
            />
        </div>
    </div>
</div>

<script>
    //var currentUser = {};

    // pick up new user
    $('#signUp').click(function () {
        var name = $("#fullName").val();
        var email = $("#inputEmail").val();
        var password = $("#inputPassword").val();
        console.log("New User =" + name + " " + email + " " + password);
        SignUp(email, password, name);
    });
    // Sign in existin Users

    $("#signIn").click(function () {
      
        var email = $("#inputEmail").val();
        var password = $("#inputPassword").val();
        console.log("Existing User =" + email + " " + password);
        SignIn(email, password);
    });
    var database = firebase.database();
    function writeUserData(name, email) {
        firebase.database().ref('/Users').push({
            "username": name,
            "email": email
        });
    }

    function SignUp(email, password, name) {
      writeUserData(name, email);
            firebase
            .auth()
            .createUserWithEmailAndPassword(email, password)
            .then(user => {
                window.location.href =
                    "https://web.njit.edu/~an543/planTopart/formPage/Introduction.html";
                alert(" Welcome to Plan To Part");
            })
            .catch(error => {
                var errorCode = error.code;
                var errorMessage = error.message;
                console.log(errorMessage);
            });
    
    }

    function SignIn(email, password) {
        firebase
            .auth()
            .signInWithEmailAndPassword(email, password)
            .then(user => {
                window.location.href =
                    "https://web.njit.edu/~an543/planTopart/formPage/Introduction.html";
                alert("Welcome Back" + " " + email);
            })
            .catch(error => {
                var errorCode = error.code;
                var errorMessage = error.message;
                console.log(errorMessage);
                alert(errorMessage);
            });
    }
</script>
</body>
</html>
